/*
 * Copyright (C) 2018 The LineageOS Project
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

/ {
	/* pstore: reserved DDR memory region for post-mortem kernel logs */
	memory {
		pstore_reserve_mem: pstore_reserve_mem_region@0 {
			linux,reserve-contiguous-region;
			linux,reserve-region;
			linux,remove-completely;
			reg = <0x00000000 0x30000000    /* Address */
			       0x00000000 0x00300000>;  /* Size */
			label = "pstore_reserve_mem";
		};
	};
};

&soc {
};

/* LCD panel
 * - Documentation/devicetree/bindings/fb/mdss-dsi-panel.txt
 * - Overrides dsi-panel-nt35597-dualmipi-wqxga-video.dtsi
 */
&dsi_dual_nt35597_video {
	qcom,mdss-dsi-panel-width = <800>;  /* Previously 720 */
	qcom,mdss-dsi-h-front-porch = <17>; /* Horizontal front porch in pixels; previously 100 */
	qcom,mdss-dsi-h-back-porch = <30>;  /* Horizontal back porch in pixels; previously 32 */
	qcom,mdss-dsi-h-pulse-width = <4>;  /* Previously 16 */
	qcom,mdss-dsi-v-back-porch = <24>;  /* Vertical back porch in pixels; previously 7 */
	qcom,mdss-dsi-v-front-porch = <16>; /* Vertical front porch in pixels; previously 8 */
	qcom,mdss-dsi-v-pulse-width = <8>;  /* Previously 1 */
	qcom,mdss-dsi-on-command =
	       [39 01 00 00 01 00 06 f0 55 aa 52 08 00
	        15 01 00 00 01 00 02 c0 0d
	        39 01 00 00 01 00 05 b8 03 06 00 00
	        39 01 00 00 01 00 05 ff aa 55 a5 80
	        15 01 00 00 01 00 02 6f 0f
	        15 01 00 00 01 00 02 f7 01
	        39 01 00 00 01 00 05 ff aa 55 a5 00
	        15 01 00 00 01 00 02 62 01
	        15 01 00 00 01 00 02 55 02
	        15 01 00 00 01 00 02 53 24
	        15 01 00 00 01 00 02 51 80
	        05 01 00 00 78 00 02 11 00
	        05 01 00 00 15 00 02 29 00];
	/* DSI PHY timings */
	qcom,mdss-dsi-panel-timings = [D5 32 22 00 60 64 26 34 29 03 04 00];
};
/*
 * Overrides msm8976-mdss-mtp.dtsi
 */
&dsi_dual_nt35597_video {
	/delete-property/ qcom,mdss-dsi-pan-enable-dynamic-fps;
	/delete-property/ qcom,mdss-dsi-pan-fps-update;
};
&mdss_dsi0 {
	/delete-property/ qcom,platform-bklight-en-gpio;
};
&mdss_dsi1 {
	/delete-property/ qcom,platform-bklight-en-gpio;
};
/*
 * Disable Linux splash screen at boot
 * Overrides msm8976-mdss.dtsi
 */
&mdss_fb0 {
	/delete-property/ qcom,mdss-fb-splash-logo-enabled;
};

/*
 * Bindings for I2C peripherals
 * Overrides msm8976-mtp.dtsi
 */
&i2c_2 {
	/delete-node/ smb1351-charger@1d;
	bq25892-charger@6b {
		compatible = "qcom,bq25892-charger";
		reg = <0x6b>;
		qcom,parallel-charger;
		qcom,float-voltage-mv = <4352>;
		qcom,recharge-mv = <200>;
		qcom,fastchg-current-max-ma = <3800>;
		qcom,iterm-ma = <192>;
		interrupt-parent = <&msm_gpio>;
		interrupts = <68 0>;
		pinctrl-names = "default";
		pinctrl-0 = <&charger_int_default &charger_psel_default>; /* Not yet defined */
		qcom,psel-gpio = <&msm_gpio 16 0>;
	};
	bq27541-battery@55 {
		compatible = "qcom,bq27541-battery";
		reg = <0x55>;
	};
	backlight@2c {
		compatible = "ti,lp8557";
		reg = <0x2c>;
		bl-name = "lcd-bl";
		dev-ctrl = /bits/ 8 <0x41>;
		init-brt = /bits/ 8 <0x80>;
		/* 4V OV, 4 output LED string enabled */
		rom_14h {
			rom-addr = /bits/ 8 <0x14>;
			rom-val = /bits/ 8 <0xbf>;
		};
	};
};
&i2c_8 {
	aw2013@45 {
		compatible = "awinic,aw2013";
		reg = <0x45>;
		vdd-supply = <&pm8950_l17>; /* msm8976-regulator.dtsi */
		vcc-supply = <&pm8950_l6>;
		aw2013,green {
			aw2013,name = "green";
			aw2013,id = <0>;
			aw2013,max-brightness = <255>;
			aw2013,max-current = <1>;
			aw2013,rise-time-ms = <2>;
			aw2013,hold-time-ms = <1>;
			aw2013,fall-time-ms = <2>;
			aw2013,off-time-ms  = <1>;
		};
	};
	fusb302@22 {
		compatible = "fairchild,fusb302";
		reg = <0x22>;
		fairchild,int_n = <&msm_gpio 135 0x00>;
		interrupt-parent = <&msm_gpio>;
		interrupts = <135 0>; /* MSM GPIO 102 */
		interrupt-names = "fsc_interrupt_int_n";
		pinctrl-names = "fusb_active", "fusb_suspend";
		pinctrl-0 = <&fusb_int_active>;   /* Not yet defined */
		pinctrl-1 = <&fusb_int_suspend>;  /* Not yet defined */
	};
};

